<% content_for :breadcrumb do %>
  <div class="flex items-center">
    <%= breadcrumbs ["Home",root_path], "Facility Setup" %>
  </div>
<% end %>

<div class="pa4">
  <div class="flex flex-column justify-between bg-white box--shadow">
    <div class="pa4 min-h-600">
      <div class="fl w-70-l w-100 flex flex-column width-100">
        <h5 class="tl pa0 ma0 h5--font dark-grey">Tell us about your facility.</h5>
        <p class="mt2 body-1 grey">
          Let's get a few details of your facility to get things rolling...
        </p>

        <%= form_with scope: :facility,
          url: facility_setup_update_basic_info_path(facility_id: @wizard_form.id),
          html: {id: "wizard-form"},
          local: true do |f| %>
          <%= f.hidden_field :id, value: @wizard_form.id %>
          <% if @wizard_form.errors.any? %>
            <div id="error_explanation" class="red">
              <h3><%= pluralize(@wizard_form.errors.count, "error") %> prohibited this facility from being saved:</h2>
              <ul>
              <% @wizard_form.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
              </ul>
            </div>
          <% end %>

          <div class="flex flex-column mt3">
            <div class="mv4 flex flex-row-l flex-column">
              <div class="w-20">
                <span class="subtitle-2 grey">Facility Details</span>
              </div>

              <div class="fl w-80-l w-100 pt0-l pt3 flex flex-column">
                <div class="flex flex-row mb3">
                  <div class="w-50 mr4">
                    <%= f.label "Company name", class: "db mb1 grey subtitle-2 ttc" %>
                    <%= f.text_field :company_name,
                      placeholder: "Company's name",
                      value: @wizard_form.company_name,
                      class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                  </div>

                  <div class="w-20-l w-30">
                    <%= f.label "State License #", class: "db mb1 grey subtitle-2 ttc" %>
                    <%= f.text_field :state_license,
                      placeholder: "S0001",
                      value: @wizard_form.state_license,
                      class: "grey input-reset br2 outline-0 ba b--light-grey pa2 db w-100" %>
                  </div>
                </div>

                <div class="flex flex-row">
                  <div class="mr4 w-50">
                    <%= f.label "Facility name", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :name,
                      placeholder: "Facility's name",
                      value: @wizard_form.name,
                      class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                  </div>

                  <div class="w-20-l w-30">
                    <%= f.label "Facility ID", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :code,
                      placeholder: "S0001",
                      value: @wizard_form.code,
                      class: "grey input-reset br2 outline-0 ba b--light-grey pa2 db w-100" %>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb4 flex flex-row-l flex-column">
              <div class="w-20">
                <span class="grey subtitle-2 ttc">Location Details</span>
              </div>

              <div class="fl w-80-l w-100 pt0-l pt3 flex flex-column">
                <div class="flex flex-row">
                  <div class="w-20-l w-30 mr4">
                    <%= f.label "Location license #", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :site_license,
                      placeholder: "F0001",
                      rows: 1,
                      value: @wizard_form.site_license,
                      class: "ttu grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                  </div>

                  <div class="w-50">
                    <%= f.label "Address", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :address_address,
                      placeholder: "1011, 11th ave ne",
                      value: @wizard_form.address_address,
                      class: "ttu grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                  </div>
                </div>

                <div class="flex flex-row mt3">
                  <div class="w-20-l w-30 mr4">
                    <%= f.label "Zipcode", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :address_zipcode,
                      placeholder: "123000",
                      value: @wizard_form.address_zipcode,
                      class: "grey ba b--light-grey br2 outline-0 br2 outline-0 pa2 db w-100" %>
                  </div>

                  <div class="w-50 flex flex-row">
                    <div class="w-50 mr4-l mr3 margin-mr3">
                      <%= f.label :address_state, class: "grey subtitle-2 ttc db mb1" %>
                      <%= f.text_field :address_state,
                        placeholder: "Carlifornia",
                        value: @wizard_form.address_state,
                        class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                    </div>

                    <div class="w-50">
                      <%= f.label :address_country, class: "grey subtitle-2 ttc db mb1" %>
                      <%= f.text_field :address_country,
                        placeholder: "United States of America",
                        value: @wizard_form.address_country,
                        class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="mb4 flex flex-row-l flex-column">
              <div class="w-20">
                <span class="grey subtitle-2 ttc">Contact Details</span>
              </div>

              <div class="fl w-70-l w-100 flex flex-column pt0-l pt3">
                <div class="flex flex-row">
                  <div class="mr4 w-40">
                    <%= f.label "Phone Number", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :address_main_number,
                      placeholder: "1234567",
                      value: @wizard_form.address_main_number,
                      class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                  </div>

                  <div class="w-40">
                    <%= f.label "Fax Number", class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :address_fax_number,
                      placeholder: "011 1234567",
                      value: @wizard_form.address_fax_number,
                      class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                  </div>
                </div>

                <div class="w-40 mt3">
                  <%= f.label :email, class: "grey subtitle-2 ttc db mb1" %>
                    <%= f.text_field :address_email,
                      placeholder: "user@email.com",
                      value: @wizard_form.address_email,
                      class: "grey ba b--light-grey br2 outline-0 pa2 db w-100" %>
                </div>
              </div>
            </div>

            <div class="mv4 flex flex-row items-center">
              <p class="grey subtitle-2 dib">Mark facility as ready so that it would be available in other modules:</p>
              <div class="dib pointer w-20-l w-10 flex justify-end">
                <%= f.check_box :is_complete, checked: @wizard_form.is_complete, class: "toggle toggle-default" %>
                <label class="toggle-button" for="facility_is_complete"></label>
              </div>
            </div>
          </div>
          
        <% end %>
      </div>
    </div>

    <%= render "form_buttons" %>
  </div>
</div>
