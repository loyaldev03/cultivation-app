<% content_for :breadcrumb do %>
  <%= breadcrumbs ["Settings", settings_path], "Company Setup"%>
<% end %>

<div class="pa4">
  <div class="flex flex-column justify-between bg-white box--shadow">
    <div class="pa4 min-h-600">
      <div class="fl w-100 flex flex-column width-100">
        <h5 class="tl pa0 ma0 h5--font dark-grey ttc">company setup</h5>
        <p class="mt2 body-1 grey">
          Let's get a few details of your company info.
        </p>
        <%= form_with model: @company_info,
          url: settings_company_company_info_path(onboarding_type: params[:onboarding_type],
                                                  facility_id: params[:facility_id]), local: true do |f| %>
          <div class="flex flex-column mt3">
          <div class="fl w-100-m">
            <a 
              href="<%= edit_settings_company_company_info_path(type: 'company_info') %>" 
              class="tab <%= 'tab--active' if params[:type] == 'company_info' || params[:type].nil?%>"
            >
              Company Info
            </a>
            <a 
              href="<%= edit_settings_company_company_info_path(type: 'work_schedules') %>" 
              class="tab <%= 'tab--active' if params[:type] == 'work_schedules'%>"
            >
              Work Schedules
            </a>
            <a 
              href="<%= edit_settings_company_company_info_path(type: 'holidays') %>" 
              class="tab <%= 'tab--active' if params[:type] == 'holidays'%>"
            >
              Holiday
            </a>
            <a 
              href="<%= edit_settings_company_company_info_path(type: 'facilities') %>" 
              class="tab <%= 'tab--active' if params[:type] == 'facilities'%>"
            >
              Facilities
            </a>
            <div class="mt0 ba b--light-grey pa3">

               <%= render partial: params[:type] || 'company_info', locals: {f: f} %>

          </div>
      </div>
    </div>

    <div class="ph4 flex flex-row justify-between items-center ba bt-1 bb-0 br-0 bl-0 b--light-grey" style="height: 86px">
      <div class="dim flex flex-row items-center pointer">
        <i class="material-icons md-light-gray">keyboard_arrow_left</i>
        <%= link_to "Back", settings_path, class: "db tr ttu link button--font light-grey" %>
      </div>

      <% if params[:type] == "company_info" || params[:type] == "work_schedules" || params[:type] == "holidays" %>
        <div class="flex flex-row items-center">
        <%= f.submit "Save",
            class: "db pv3 ph4 bg-orange white button--font bn box--br3 ttu link dim pointer" %>
        </div>
      <% end %>
    </div>
  <% end %>
  </div>
</div>

<% content_for :before_body_end do %>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      setupCollapsible();
    })
  </script>
<% end %>
